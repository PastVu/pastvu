module.exports = function (config, appRequire) {
    const _ = appRequire('lodash');
    const makeDir = require('make-dir');
    const log4js = require('log4js');

    _.merge(config, {
        notifier: true, // Send periodical emails to user
        primary: true,
        client: {
            hostname: 'pastvu.local',
        },

        storePath: '../store',
        logPath: '../logs',

        mongo: {
            pool: 10,
        },

        // In development you should create a test account at https://ethereal.email, so email will not be sent to the real users
        mail: {
            type: 'SMTP',
            secure: true,
            host: '',
            port: 0,
            auth: {
                user: '',
                pass: '',
            },
        },
    });

    // configure logging to filesystem
    makeDir.sync(config.logPath);
    log4js.configure('./config/log4js.json', { cwd: config.logPath });

    return config;
};
